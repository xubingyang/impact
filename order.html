<!DOCTYPE html>
<html>

<head>
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-PZH4WXX');</script>
  <!-- End Google Tag Manager -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
  <link rel="stylesheet" href="assets/styles.css">

  <script type="text/javascript">
    const queryParams = new URLSearchParams(window.location.search)
    if (queryParams.has('irclickid') || queryParams.has('iradname')) {
      const irclickid = queryParams.get('irclickid')
      const iradname = queryParams.get('iradname')
      localStorage.setItem('_ir_clickid', irclickid)
      localStorage.setItem('_ir_ad_name', iradname)
    }
  </script>
  <title>Impact Demo Order Page</title>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PZH4WXX" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="form-body">
    <div class="row">
      <div class="form-holder">
        <div class="form-content">
          <div class="form-items">
            <h3>Generating random order</h3>
            <p>Data is only for demo purpose</p>
            <form>

              <div class="col-md-12">
                <label class="text-white mb-0" for="orderId">Order ID</label>
                <input class="form-control" type="text" name="orderId" id="orderId" placeholder="orderId-0001">
              </div>

              <div class="col-md-12">
                <label class="text-white mb-0" for="subTotal">Total Amount</label>
                <input class="form-control" type="text" name="subTotal" id="subTotal" placeholder="5000">
              </div>

              <div class="col-md-12">
                <label class="text-white mb-0" for="category">Category</label>
                <input class="form-control" type="text" name="category" id="category" placeholder="shoes">
              </div>

              <div class="col-md-12">
                <label class="text-white mb-0" for="sku">SKU</label>
                <input class="form-control" type="text" name="sku" id="sku" placeholder="sku-0001">
              </div>

              <div class="col-md-12">
                <label class="text-white mb-0" for="quantity">Quantity</label>
                <input class="form-control" type="text" name="quantity" id="quantity" placeholder="3">
              </div>

              <div class="col-md-12">
                <label class="text-white mb-0" for="promoCode">Promo Code</label>
                <input class="form-control" type="text" name="promoCode" id="promoCode" placeholder="welcome0001">
              </div>

              <div class="form-button mt-3">
                <button id="resume" type="button" class="btn btn-info">Resume</button>
                <button id="generate" type="button" class="btn btn-warning">(re)Generate</button>
                <a id="order" href="checkout.html" class="btn btn-success">Order</a>
                <a href="index.html" class="btn btn-primary">Go back</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const orderId = document.querySelector('#orderId')
    const subTotal = document.querySelector('#subTotal')
    const category = document.querySelector('#category')
    const sku = document.querySelector('#sku')
    const quantity = document.querySelector('#quantity')
    const promoCode = document.querySelector('#promoCode')
    const categoryArray = ['shoes', 'clothes', 'bags', 'accessories']
    const skuArray = ['sku-0001', 'sku-0002', 'sku-0003', 'sku-0004', 'sku-0005', 'sku-0006', 'sku-0007', 'sku-0008', 'sku-0009', 'sku-0010']
    const promoCodeArray = ['welcomesales', 'summersales', 'wintersales', 'autumnsales', 'springsales', 'christmassales', 'newyearsales', 'eastersales', 'halloweensales']
    const generate = () => {
      orderId.value = orderIdValue = uuid.v4()
      subTotal.value = subTotalValue = Math.floor(Math.random() * 10000)
      category.value = categoryValue = categoryArray[Math.floor(Math.random() * categoryArray.length)]
      sku.value = skuValue = skuArray[Math.floor(Math.random() * skuArray.length)]
      quantity.value = quantityValue = Math.floor(Math.random() * 10) + 1
      promoCode.value = promoCodeValue = promoCodeArray[Math.floor(Math.random() * promoCodeArray.length)]
    }
    const setToLocalStorage = () => {
      localStorage.setItem('_ir_order_id', orderIdValue);
      localStorage.setItem('_ir_sub_total', subTotalValue);
      localStorage.setItem('_ir_category', categoryValue);
      localStorage.setItem('_ir_sku', skuValue);
      localStorage.setItem('_ir_quantity', quantityValue);
      localStorage.setItem('_ir_order_promo_code', promoCodeValue);
      if (localStorage.getItem('_ir_customer_id') === null) {
        localStorage.setItem('_ir_customer_id', '');
      }
      if (localStorage.getItem('_ir_email') === null) {
        localStorage.setItem('_ir_email', '');
      }
    }
    const getFromLocalStorage = () => {
      subTotal.value = localStorage.getItem('_ir_sub_total')
      category.value = localStorage.getItem('_ir_category')
      sku.value = localStorage.getItem('_ir_sku')
      quantity.value = localStorage.getItem('_ir_quantity')
      promoCode.value = localStorage.getItem('_ir_order_promo_code')
    }
    const generateButton = document.querySelector('#generate')
    const resumeButton = document.querySelector('#resume')
    const orderButton = document.querySelector('#order')
    generateButton.addEventListener('click', () => {
      generate()
      setToLocalStorage()
    })
    resumeButton.addEventListener('click', () => {
      getFromLocalStorage()
    })
    orderButton.addEventListener('click', () => {
      setToLocalStorage()
    })
  </script>
</body>

</html>